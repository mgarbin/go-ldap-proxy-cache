# Example YAML configuration file for go-ldap-proxy-cache

# Proxy listen address (default: :3389)
proxy_addr: ":3389"

# Backend LDAP server address (default: localhost:389)
# You can specify just the host:port (defaults to ldap://) or include the protocol:
#   - ldap://localhost:389   (unencrypted LDAP)
#   - ldaps://localhost:636  (LDAP over TLS/SSL)
#   - localhost:389          (defaults to ldap://localhost:389)
ldap_server: "localhost:389"

# Enable cache system (default: true)
# When set to false, the cache system is completely disabled
# and all requests are forwarded directly to the backend LDAP server
cache_enabled: true

# Cache TTL duration (default: 15m)
# Examples: 15m, 1h, 30m, 2h30m
# Only used when cache_enabled is true
cache_ttl: 15m

# Backend connection timeout (default: 10s)
# Time to wait for backend LDAP server connection
connection_timeout: 10s

# Client timeout (default: 30s)
# Time to wait for client operations
client_timeout: 30s

# Redis cache configuration (default: disabled)
# When enabled, Redis will be used instead of in-memory cache
# Note: cache_enabled must be true for Redis cache to work
redis_enabled: false

# Redis server address (default: localhost:6379)
# Only used when redis_enabled is true
redis_addr: "localhost:6379"

# Redis password (default: empty/no password)
# Only used when redis_enabled is true
redis_password: ""

# Redis database number (default: 0)
# Only used when redis_enabled is true
redis_db: 0

# Enable JSON logging format (default: false)
# When true, logs are output in JSON format for easier parsing and integration
# with log aggregation systems. When false, logs use human-readable console format.
log_json: false

# Path to log file (default: "" which means stdout)
# When specified, logs are written to this file instead of stdout
# The file is created if it doesn't exist, and new logs are appended to existing content
# Example: "/var/log/ldap-proxy.log" or "./logs/proxy.log"
log_file: ""

# Example usage:
# ./ldap-proxy -config config.yaml
#
# Note: You can also override any YAML setting with command-line flags:
# ./ldap-proxy -config config.yaml -proxy-addr :3390
#
# When using a config file, all command-line flags become optional.
# CLI flags will override values from the YAML config file.
#
# To disable cache via command line:
# ./ldap-proxy -cache-enabled=false
#
# To enable Redis cache via command line:
# ./ldap-proxy -redis-enabled -redis-addr localhost:6379 -redis-db 0
#
# To enable JSON logging via command line:
# ./ldap-proxy -log-json

# To write logs to a file via command line:
# ./ldap-proxy -log-file /var/log/ldap-proxy.log
#
# To write JSON logs to a file:
# ./ldap-proxy -log-json -log-file /var/log/ldap-proxy.log
